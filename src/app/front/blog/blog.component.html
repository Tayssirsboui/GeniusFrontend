<main>
    <!--? Slider Area Start-->
    <section class="slider-area slider-area2">
        <div class="slider-active">
            <!-- Single Slider -->
            <div class="single-slider slider-height2">
                 
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-xl-6 col-lg-7 col-md-12">
                        <div class="hero__caption">
                            <p data-animation="fadeInLeft" data-delay="0.4s">Build skills with courses, certificates, and degrees online from world-class universities and companies</p>
                            <a routerLink="/add-post" class="fas fa-plus-circle btn hero-btn" data-animation="fadeInLeft" data-delay="0.7s" >
                                ajouter un post </a>
                        </div>
                    </div>
                </div>
            </div>           
        </div>
    </section>
    <!--? Blog Area Start-->
    <section class="blog_area section-padding">
        <div class="container">
            <div class="form-group">
                <div class="input-group mb-3">
                    <!-- Modern Search Input -->
                    <input type="text" class="form-control search-input" placeholder="Search Keyword"
                    onfocus="this.placeholder = ''"
                    onblur="this.placeholder = 'Search Keyword'">
                    <div class="input-group-append">
                        <button class="btns search-btn" type="button"><i class="ti-search"></i></button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 mb-5 mb-lg-0">
                    <div class="blog_left_sidebar">
                        <!-- Article Posts Loop -->
                        <article class="blog_item" *ngFor="let p of listPosts">
                            <div class="blog_details border rounded-lg shadow-sm mb-4">
                                <div class="blog_item_img position-relative">
                                    <!-- Image de l'article -->
                                    <img class="card-img rounded-0" src="assets/img/blog/blog-post-3.webp" alt="">
                                    <!-- Date de publication -->
                                    <div class="blog_item_date position-absolute bottom-0 left-0 p-3">
                                        <h3 class="text-white">{{ p.createdAt | date:'d MMM yyyy' }}</h3> <!-- Format de la date -->
                                        <p class="text-white" style="font-size: 14px;">{{ p.createdAt | date:'shortTime' }}</p> <!-- Heure de la date -->
                                    </div>
                                </div>
                                <!-- Titre de l'article -->
                                <a class="d-inline-block" [routerLink]="['/blog-details', p.id]">
                                    <h2 class="blog-head" style="color: #333; font-size: 24px; font-weight: 700; margin-top: 20px;">
                                        {{ p.title }}
                                    </h2>
                                </a>
                                <!-- Contenu de l'article -->
                                <p style="font-size: 16px; line-height: 1.6; color: #555;">
                                    {{ p.content }}
                                </p>
                                <!-- Liens d'informations supplémentaires -->
                                <ul class="blog-info-link" style="font-size: 14px; margin-top: 15px;">
                                    <li><a href="#"><i class="fa fa-user"></i> Travel, Lifestyle</a></li>
                                    <li><a href="#"><i class="fa fa-comments"></i> 03 Comments</a></li>
                                </ul>
                                <!--<a routerLink="/blog-details" class="btn hero-btn" data-animation="fadeInLeft" data-delay="0.7s">voir les details  </a>
                                    <!-- Bouton Supprimer avec confirmation -->
                                    <small>User post: {{ p.userId }} | Connected: {{ userId }}</small>

                                    <button class="btn btn-danger ml-2"  (click)="confirmDelete (p.id)" style="background-color: #be2d2d; border: none; color: white; padding: 10px 20px; border-radius: 5px;">
                                        ❌ Supprimer
                                      </button>
                                      <button *ngIf="p.userId === userId" class="btn btn-warning btn-sm" [routerLink]="['/add-post', p.id]">
                                        ✏️ Update
                                      </button> 
                            </div>
                            <!-- Modal de Confirmation -->
                        <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="confirmDeleteLabel">Confirmer la suppression</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                Êtes-vous sûr de vouloir supprimer ce post ? Cette action est irréversible.
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                                <button type="button" class="btn btn-danger" (click)="deletePost()">Supprimer</button>
                                </div>
                            </div>
                            </div>
                        </div>
  
                        </article>

                        <!-- Pagination -->
                        <nav class="blog-pagination justify-content-center d-flex">
                            <ul class="pagination">
                                <li class="page-item">
                                    <a href="#" class="page-link" aria-label="Previous">
                                        <i class="ti-angle-left"></i>
                                    </a>
                                </li>
                                <li class="page-item">
                                    <a href="#" class="page-link">1</a>
                                </li>
                                <li class="page-item active">
                                    <a href="#" class="page-link">2</a>
                                </li>
                                <li class="page-item">
                                    <a href="#" class="page-link" aria-label="Next">
                                        <i class="ti-angle-right"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div> 
                </div>

                <!-- Sidebar Section with Modern Search -->
                <div class="col-lg-4">
                    <div class="blog_right_sidebar">
                        

                        <!-- Recent Posts Section -->
                        <aside class="single_sidebar_widget popular_post_widget">
                            <h3 class="widget_title" style="color: #2d2d2d;">Recent Post</h3>
                            <div class="media post_item">
                                <img src="assets/img/post/post_1.png" alt="post">
                                <div class="media-body">
                                    <a href="blog_details.html">
                                        <h3 style="color: #2d2d2d;">From life was you fish...</h3>
                                    </a>
                                    <p>January 12, 2019</p>
                                </div>
                            </div>
                            <div class="media post_item">
                                <img src="assets/img/post/post_2.png" alt="post">
                                <div class="media-body">
                                    <a href="blog_details.html">
                                        <h3 style="color: #2d2d2d;">The Amazing Hubble</h3>
                                    </a>
                                    <p>02 Hours ago</p>
                                </div>
                            </div>
                            <div class="media post_item">
                                <img src="assets/img/post/post_3.png" alt="post">
                                <div class="media-body">
                                    <a href="blog_details.html">
                                        <h3 style="color: #2d2d2d;">Astronomy Or Astrology</h3>
                                    </a>
                                    <p>03 Hours ago</p>
                                </div>
                            </div>
                            <div class="media post_item">
                                <img src="assets/img/post/post_4.png" alt="post">
                                <div class="media-body">
                                    <a href="blog_details.html">
                                        <h3 style="color: #2d2d2d;">Asteroids telescope</h3>
                                    </a>
                                    <p>01 Hours ago</p>
                                </div>
                            </div>
                        </aside>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Blog Area End -->
</main>

<!-- Scroll Up -->
<div id="back-top" (click)="scrollToTop()" >
    <a title="Go to Top" > <i class="fas fa-level-up-alt"></i></a>
</div>
